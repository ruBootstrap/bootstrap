---
layout: docs
title: Всплывающие окна
description: Документация и примеры добавления всплывающих окон Bootstrap, подобных тем, что есть в iOS, к любому элементу на вашем сайте.
group: components
toc: true
---

## Обзор

Что нужно знать при использовании плагина popover:

- Вспомогательные элементы полагаются на стороннюю библиотеку [Popper](https://popper.js.org/docs/v2/) для позиционирования. Вы должны включить [popper.min.js]({{< param "cdn.popper" >}}) перед `bootstrap.js` или использовать `bootstrap.bundle.min.js`, который содержит Popper.
- Вспомогательные элементы требуют [плагин popover]({{< docsref "/components/popovers" >}}) в качестве зависимости.
- Вспомогательные элементы являются опциональными из соображений производительности, поэтому **вам необходимо инициализировать их самостоятельно**.
- Значения `title` и `content` нулевой длины никогда не будут отображать вспомогательный элемент.
- Укажите `container: 'body'`, чтобы избежать проблем с отображением в более сложных компонентах (таких как наши группы ввода, группы кнопок и т. д.).
- Запуск вспомогательных элементов на скрытых элементах не будет работать.
- Вспомогательные элементы для элементов `.disabled` или `disabled` должны запускаться на элементе-оболочке.
- При запуске из якорей, которые переносят на несколько строк, вспомогательные элементы будут центрированы по общей ширине якорей. Используйте `.text-nowrap` в своих `<a>`, чтобы избежать этого поведения.
- Вспомогательные элементы должны быть скрыты до того, как соответствующие им элементы будут удалены из DOM.
- Вспомогательные элементы могут запускаться благодаря элементу внутри теневого DOM.

{{< callout info >}}
{{< partial "callouts/info-sanitizer.md" >}}
{{< /callout >}}

{{< callout info >}}
{{< partial "callouts/info-prefersreducedmotion.md" >}}
{{< /callout >}}

Продолжайте читать, чтобы увидеть, как работают всплывающие окна с некоторыми примерами.

## Примеры

### Включить всплывающие окна

Как упоминалось выше, вы должны инициализировать всплывающие окна, прежде чем их можно будет использовать. Один из способов инициализировать все всплывающие окна на странице — выбрать их по их атрибуту `data-bs-toggle`, например:

```js
const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
```

### Живая демонстрация

Мы используем JavaScript, аналогичный приведенному выше фрагменту кода, для отображения следующего живого всплывающего окна. Заголовки устанавливаются с помощью `data-bs-title`, а содержимое тела устанавливается с помощью `data-bs-content`.

{{< callout warning >}}
{{< partial "callouts/warning-data-bs-title-vs-title.md" >}}
{{< /callout >}}

{{< example stackblitz_add_js="true" >}}
<button type="button" class="btn btn-lg btn-danger" data-bs-toggle="popover" data-bs-title="Заголовок всплывающего окна" data-bs-content="А вот и потрясающий контент. Это очень увлекательно. Верно?">Нажмите, чтобы переключить всплывающее окно</button>
{{< /example >}}

### Четыре направления

Доступны четыре варианта: верхний, правый, нижний и левый. Направления отражаются при использовании Bootstrap в RTL. Установите `data-bs-placement`, чтобы изменить направление.

{{< example stackblitz_add_js="true" >}}
<button type="button" class="btn btn-secondary" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-content="Всплывающее окно вверх">
  Всплывающее окно наверх
</button>
<button type="button" class="btn btn-secondary" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right" data-bs-content="Всплывающее окно справа">
  Всплывающее окно направо
</button>
<button type="button" class="btn btn-secondary" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="bottom" data-bs-content="Всплывающее окно внизу">
  Всплывающее окно вниз
</button>
<button type="button" class="btn btn-secondary" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="left" data-bs-content="Всплывающее окно слева">
  Всплывающее окно налево
</button>
{{< /example >}}

### Пользовательский `container`

Если у вас есть некоторые стили в родительском элементе, которые мешают всплывающему меню, вам нужно указать пользовательский `container`, чтобы HTML-код всплывающего окна вместо этого отображался внутри этого элемента. Это часто встречается в адаптивных таблицах, группах ввода и т.п.

```js
const popover = new bootstrap.Popover('.example-popover', {
  container: 'body'
})
```

Другая ситуация, когда вы захотите установить явный пользовательский `container`, — это всплывающие окна внутри [модального диалога]({{< docsref "/components/modal" >}}), чтобы убедиться, что само всплывающее окно добавлено к модальный. Это особенно важно для всплывающих окон, содержащих интерактивные элементы — модальные диалоги перехватывают фокус, поэтому, если всплывающее окно не является дочерним элементом модального окна, пользователи не смогут сфокусировать или активировать эти интерактивные элементы.

```js
const popover = new bootstrap.Popover('.example-popover', {
  container: '.modal-body'
})
```

### Пользовательские всплывающие окна

{{< added-in "5.2.0" >}}

Вы можете настроить внешний вид всплывающих окон, используя [CSS-переменные](#variables). Мы устанавливаем пользовательский класс с `data-bs-custom-class="custom-popover"`, чтобы ограничить наш пользовательский внешний вид и использовать его для переопределения некоторых локальных переменных CSS.

{{< scss-docs name="custom-popovers" file="site/assets/scss/_component-examples.scss" >}}

{{< example class="custom-popover-demo" stackblitz_add_js="true" >}}
<button type="button" class="btn btn-secondary"
        data-bs-toggle="popover" data-bs-placement="right"
        data-bs-custom-class="custom-popover"
        data-bs-title="Пользовательское всплывающее окно"
        data-bs-content="Это всплывающее окно оформлено с помощью переменных CSS.">
  Пользовательское всплывающее окно
</button>
{{< /example >}}

### Закрыть при следующем клике

Используйте триггер `focus`, чтобы закрыть всплывающие окна при следующем клике пользователя по элементу, отличному от переключаемого элемента.

{{< callout danger >}}
**Для закрытия при следующем нажатии требуется специальный HTML-код для правильного кросс-браузерного и кросс-платформенного поведения.** Вы можете использовать только элементы `<a>`, но не `<button>`, и вы должны включить [`tabindex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex).
{{< /callout >}}

{{< example stackblitz_add_js="true" >}}
<a tabindex="0" class="btn btn-lg btn-danger" role="button" data-bs-toggle="popover" data-bs-trigger="focus" data-bs-title="Отклоняемое всплывающее окно" data-bs-content="А вот и потрясающий контент. Это очень увлекательно. Верно?">Отклоняемое всплывающее окно</a>
{{< /example >}}

```js
const popover = new bootstrap.Popover('.popover-dismiss', {
  trigger: 'focus'
})
```

### Отключенные элементы

Элементы с атрибутом `disabled` не являются интерактивными, то есть пользователи не могут навести на них курсор или щелкнуть их, чтобы вызвать всплывающее окно (или всплывающую подсказку). В качестве обходного пути вы захотите вызвать всплывающее окно из обертки `<div>` или `<span>`, в идеале сделать фокус на клавиатуре с помощью `tabindex="0"`.

Для отключенных триггеров всплывающих окон вы также можете предпочесть `data-bs-trigger="hover focus"`, чтобы всплывающее окно отображалось как немедленная визуальная обратная связь для ваших пользователей, поскольку они могут не ожидать _клика_ по отключенному элементу.

{{< example stackblitz_add_js="true" >}}
<span class="d-inline-block" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Отключено всплывающее окно">
  <button class="btn btn-primary" type="button" disabled>Кнопка отключена</button>
</span>
{{< /example >}}

## CSS

### Переменные

{{< added-in "5.2.0" >}}

Как часть развивающегося подхода Bootstrap к переменным CSS, всплывающие окна теперь используют локальные переменные CSS в `.popover` для расширенной настройки в реальном времени. Значения переменных CSS задаются через Sass, поэтому настройка Sass по-прежнему поддерживается.

{{< scss-docs name="popover-css-vars" file="scss/_popover.scss" >}}

### Sass переменные

{{< scss-docs name="popover-variables" file="scss/_variables.scss" >}}

## Использование

Включить всплывающие окна через JavaScript:

```js
const exampleEl = document.getElementById('example')
const popover = new bootstrap.Popover(exampleEl, options)
```

{{< callout warning >}}
**Сохраняйте всплывающие окна доступными для пользователей с клавиатурой и вспомогательными технологиями**, добавляя их только к элементам HTML, которые традиционно ориентированы на клавиатуру и являются интерактивными (например, ссылки или элементы управления формы). В то время как другие элементы HTML можно сделать фокусируемыми, добавив `tabindex="0"`, это может создать раздражающие и запутанные позиции табуляции для неинтерактивных элементов для пользователей клавиатуры, и большинство вспомогательных технологий в настоящее время не объявляют всплывающие окна в этой ситуации. Кроме того, не полагайтесь исключительно на `hover` в качестве триггера для ваших всплывающих окон, так как это сделает их невозможными для пользователей клавиатуры.

Избегайте добавления чрезмерного количества контента во всплывающие окна с опцией `html`. После отображения всплывающих окон их содержимое привязывается к элементу триггера с помощью атрибута `aria-describedby`, в результате чего все содержимое всплывающих окон объявляется пользователям вспомогательных технологий как один длинный непрерывный поток.

Всплывающие окна не управляют порядком фокуса клавиатуры, и их размещение в DOM может быть случайным, поэтому будьте осторожны при добавлении интерактивных элементов (таких как формы или ссылки), так как это может привести к нелогичному порядку фокуса или сделать содержимое всплывающего окна полностью недоступным для пользователи клавиатуры. В тех случаях, когда вы должны использовать эти элементы, рассмотрите возможность использования вместо этого модального диалога.
{{< /callout >}}

### Опции

{{< markdown >}}
{{< partial "js-data-attributes.md" >}}
{{< /markdown >}}

{{< callout warning >}}
Обратите внимание, что по соображениям безопасности параметры `sanitize`, `sanitizeFn` и `allowList` не могут быть предоставлены с использованием атрибутов данных.
{{< /callout >}}

{{< bs-table "table" >}}
| Название | Тип | По умолчанию | Описание |
| --- | --- | --- | --- |
| `allowList` | object | [Значение по умолчанию]({{< docsref "/getting-started/javascript#sanitizer" >}}) | Объект, содержащий разрешенные атрибуты и теги. |
| `animation` | boolean | `true` | Применить CSS-переход с затуханием к поповеру. |
| `boundary` | string, element | `'clippingParents'` | Граница ограничения переполнения поповера (применяется только к модификатору Popper preventOverflow). По умолчанию это `'clippingParents'`, и он может принимать ссылку HTMLElement (только через JavaScript). Для получения дополнительной информации см. [документацию Popper's](https://popper.js.org/docs/v2/utils/detect-overflow/#boundary). |
| `container` | string, element, false | `false` | Добавляет поповер к определенному элементу. Пример: `container: 'body'`. Этот параметр особенно полезен, поскольку позволяет вам расположить информер в потоке документа рядом с элементом-триггером, что предотвратит отход информера от элемента-триггера при изменении размера окна. |
| `content` | string, element, function | `''` | Текстовое содержимое информера. Если задана функция, она будет вызвана со ссылкой `this`, установленной на элемент, к которому прикреплен информер. |
| `customClass` | string, function | `''` | Добавьте классы к информеру при его отображении. Обратите внимание, что эти классы будут добавлены в дополнение к любым классам, указанным в шаблоне. Чтобы добавить несколько классов, разделите их пробелами: `'class-1 class-2'`. Вы также можете передать функцию, которая должна возвращать одну строку, содержащую дополнительные имена классов. |
| `delay` | number, object | `0` | Задержка показа и скрытия информера (мс) — не применяется к типу ручного триггера. Если указано число, задержка применяется как к скрытию, так и к показу. Структура объекта: `delay: { "show": 500, "hide": 100 }`. |
| `fallbackPlacements` | string, array | `['top', 'right', 'bottom', 'left']` | Определите резервные размещения, указав список размещений в массиве (в порядке предпочтения). Для получения дополнительной информации см. [документацию по поведению] Popper (https://popper.js.org/docs/v2/modifiers/flip/#fallbackplacements). |
| `html` | boolean | `false` | Разрешить HTML во всплывающем окне. Если true, HTML-теги в `title` всплывающего окна будут отображаться во всплывающем окне. Если false, свойство `innerText` будет использоваться для вставки содержимого в DOM. Используйте text, если вы беспокоитесь об атаках XSS. |
| `offset` | число, строка, функция | `[0, 8]` | Смещение поповера относительно его цели. Вы можете передать строку в атрибутах данных со значениями, разделенными запятыми, например: `data-bs-offset="10,20"`. Когда функция используется для определения смещения, она вызывается с объектом, содержащим размещение поппера, ссылку и прямоугольники поппера в качестве своего первого аргумента. Узел DOM-элемента триггера передается в качестве второго аргумента. Функция должна возвращать массив с двумя числами: [skidding](https://popper.js.org/docs/v2/modifiers/offset/#skidding-1), [distance](https://popper.js.org/docs/v2/modifiers/offset/#distance-1). Для получения дополнительной информации см. [offset docs](https://popper.js.org/docs/v2/modifiers/offset/#options) Поппера. |
| `placement` | string, function | `'right'` | Как расположить всплывающее окно: auto, top, bottom, left, right. Если указано `auto`, всплывающее окно будет динамически переориентировано. Когда функция используется для определения размещения, она вызывается с узлом DOM всплывающего окна в качестве первого аргумента и узлом DOM элемента-триггера в качестве второго. Контекст `this` устанавливается на экземпляр всплывающего окна. |
| `popperConfig` | null, object, function | `null` | Чтобы изменить конфигурацию Popper по умолчанию Bootstrap, см. [Конфигурация Popper](https://popper.js.org/docs/v2/constructors/#options). Когда функция используется для создания конфигурации Popper, она вызывается с объектом, который содержит конфигурацию Popper по умолчанию Bootstrap. Это помогает вам использовать и объединять конфигурацию по умолчанию с вашей собственной. Функция должна возвращать объект конфигурации для Popper. |
| `sanitize` | boolean | `true` | Включить или отключить очистку. Если активированы параметры `'template'`, `'content'` и `'title'`, они будут очищены. |
| `sanitizeFn` | null, function | `null` | Здесь вы можете указать собственную функцию очистки. Это может быть полезно, если вы предпочитаете использовать специальную библиотеку для выполнения очистки. |
| `selector` | string, false | `false` | Если указан селектор, объекты всплывающих окон будут делегированы указанным целям. На практике это также используется для применения всплывающих окон к динамически добавляемым элементам DOM (поддержка `jQuery.on`). См. [эту проблему]({{< param repo >}}/issues/4215) и [информативный пример](https://codepen.io/Johann-S/pen/djJYPb). **Примечание**: атрибут `title` не должен использоваться в качестве селектора. |
| `template` | string | `'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'` | Базовый HTML для использования при создании информера. `title` информера будет вставлен в `.popover-header`. `content` информера будет вставлен в `.popover-body`. `.popover-arrow` станет стрелкой информера. Самый внешний элемент-обертка должен иметь класс `.popover` и `role="tooltip"`. |
| `title` | string, element, function | `''` | Заголовок информера. Если задана функция, она будет вызвана со ссылкой `this`, установленной на элемент, к которому прикреплен информер. |
| `trigger` | string | `'click'` | Как активируется popover: щелчок, наведение, фокус, вручную. Вы можете передать несколько триггеров; разделяйте их пробелом. `'manual'` указывает, что popover будет активироваться программно с помощью методов `.popover('show')`, `.popover('hide')` и `.popover('toggle')`; это значение нельзя комбинировать с другими триггерами. `'hover'` сам по себе приведет к появлению popover, которые нельзя активировать с клавиатуры, и должен использоваться только в том случае, если присутствуют альтернативные методы передачи той же информации для пользователей клавиатуры.
{{< /bs-table >}}

{{< callout info >}}

#### Атрибуты данных для отдельных всплывающих окон

В качестве альтернативы параметры для отдельных всплывающих окон можно указать с помощью атрибутов данных, как описано выше.
{{< /callout >}}

#### Использование функции с `popperConfig`

```js
const popover = new bootstrap.Popover(element, {
  popperConfig(defaultBsPopperConfig) {
    // const newPopperConfig = {...}
    // use defaultBsPopperConfig if needed...
    // return newPopperConfig
  }
})
```

### Методы

{{< callout danger >}}
{{< partial "callouts/danger-async-methods.md" >}}
{{< /callout >}}

{{< bs-table "table" >}}
| Метод | Описание |
| --- | --- |
| `disable` | Удаляет возможность отображения всплывающего окна элемента. Всплывающее окно будет отображаться только в том случае, если оно будет повторно включено. |
| `dispose` | Скрывает и уничтожает всплывающее окно элемента (удаляет сохраненные данные в элементе DOM). Всплывающие окна, использующие делегирование (которые создаются с помощью [опции `selector`](#options)) не могут быть уничтожены по отдельности в элементах-триггерах-потомках. |
| `enable` | Позволяет отображать всплывающее окно элемента. **Поповеры включены по умолчанию.** |
| `getInstance` | _Статический_ метод, который позволяет вам получить экземпляр всплывающего окна, связанный с элементом DOM. |
| `getOrCreateInstance` | _Статический_ метод, который позволяет вам получить экземпляр всплывающего окна, связанный с элементом DOMили создать новый, если он не был инициализирован. |
| `hide` | Скрывает всплывающее окно элемента. **Возвращается к вызывающей стороне до того, как всплывающее окно будет фактически скрыто** (т.е. до того, как произойдет событие `hidden.bs.popover`). Это считается "ручным" запуском всплывающего окна. |
| `setContent` | Дает возможность изменить содержимое всплывающего окна после его инициализации. |
| `show` | Отображает всплывающее окно элемента. **Возврат к вызывающей стороне до того, как всплывающее окно действительно будет показано** (т.е. до того, как произойдет событие `shown.bs.popover`). Это считается "ручным" запуском всплывающего окна. Всплывающие окна, заголовок и содержимое которых имеют нулевую длину, никогда не отображаются. |
| `toggle` | Переключает всплывающее окно элемента. **Возврат к вызывающей стороне до того, как всплывающее окно будет действительно показано или скрыто** (т.е. до того, как произойдет событие `shown.bs.popover` или `hidden.bs.popover`). Это считается "ручным" запуском всплывающего окна. |
| `toggleEnabled` | Переключает возможность отображения или скрытия всплывающего окна элемента. |
| `update` | Обновляет позицию всплывающего окна элемента. |
{{< /bs-table >}}


```js
// getOrCreateInstance example
const popover = bootstrap.Popover.getOrCreateInstance('#example') // Возвращает экземпляр всплывающего окна Bootstrap

// setContent example
popover.setContent({
  '.popover-header': 'another title',
  '.popover-body': 'another content'
})

```

{{< callout info >}}
Метод `setContent` принимает аргумент `object`, где каждый ключ свойства является допустимым селектором `string` в шаблоне всплывающего окна, а каждое связанное значение свойства может быть `string` | `element` | `function` | `null`.
{{< /callout >}}

### События

{{< bs-table >}}
| Событие | Описание |
| --- | --- |
| `hide.bs.popover` | Это событие запускается сразу после вызова метода экземпляра `hide`. |
| `hidden.bs.popover` | Это событие запускается, когда всплывающее окно перестает быть скрытым от пользователя (будет ждать завершения переходов CSS). |
| `inserted.bs.popover` | Это событие запускается после события `show.bs.popover`, когда шаблон всплывающего окна был добавлен в DOM. |
| `show.bs.popover` | Это событие срабатывает сразу же, когда вызывается метод экземпляра `show`. |
| `shown.bs.popover` | Это событие запускается, когда всплывающее окно становится видимым для пользователя (будет ждать завершения переходов CSS). |
{{< /bs-table >}}

```js
const myPopoverTrigger = document.getElementById('myPopover')
myPopoverTrigger.addEventListener('hidden.bs.popover', () => {
  // сделайте что-нибудь...
})
```
