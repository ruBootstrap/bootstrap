---
title: Всплывающие окна
description: Документация и примеры добавления всплывающих окон Bootstrap, подобных тем, что есть в iOS, к любому элементу на вашем сайте.
toc: true
---

## Обзор

Что нужно знать при использовании плагина popover:

- Вспомогательные элементы полагаются на стороннюю библиотеку [Popper](https://popper.js.org/docs/v2/) для позиционирования. Вы должны включить [popper.min.js]([[config:cdn.popper]]) перед `bootstrap.js` или использовать `bootstrap.bundle.min.js`, который содержит Popper.
- Вспомогательные элементы требуют [плагин popover]([[docsref:/components/popovers]]) в качестве зависимости.
- Вспомогательные элементы являются опциональными из соображений производительности, поэтому **вам необходимо инициализировать их самостоятельно**.
- Значения `title` и `content` нулевой длины никогда не будут отображать вспомогательный элемент.
- Укажите `container: 'body'`, чтобы избежать проблем с отображением в более сложных компонентах (таких как наши группы ввода, группы кнопок и т. д.).
- Запуск вспомогательных элементов на скрытых элементах не будет работать.
- Вспомогательные элементы для элементов `.disabled` или `disabled` должны запускаться на элементе-оболочке.
- При запуске из якорей, которые переносят на несколько строк, вспомогательные элементы будут центрированы по общей ширине якорей. Используйте `.text-nowrap` в своих `<a>`, чтобы избежать этого поведения.
- Вспомогательные элементы должны быть скрыты до того, как соответствующие им элементы будут удалены из DOM.
- Вспомогательные элементы могут запускаться благодаря элементу внутри теневого DOM.

<Callout name="info-sanitizer" />

<Callout name="info-prefersreducedmotion" />

Продолжайте читать, чтобы увидеть, как работают всплывающие окна с некоторыми примерами.

## Примеры

### Включить всплывающие окна

Как упоминалось выше, вы должны инициализировать всплывающие окна, прежде чем их можно будет использовать. Один из способов инициализировать все всплывающие окна на странице — выбрать их по их атрибуту `data-bs-toggle`, например:

```js
const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
```

### Живая демонстрация

Мы используем JavaScript, аналогичный приведенному выше фрагменту кода, для отображения следующего живого всплывающего окна. Заголовки устанавливаются с помощью `data-bs-title`, а содержимое тела устанавливается с помощью `data-bs-content`.

<Callout name="warning-data-bs-title-vs-title" type="warning" />

<Example addStackblitzJs code={`<button type="button" class="btn btn-lg btn-danger" data-bs-toggle="popover" data-bs-title="Popover title" data-bs-content="And here’s some amazing content. It’s very engaging. Right?">Click to toggle popover</button>`} />

### Четыре направления

Доступны четыре варианта: верхний, правый, нижний и левый. Направления отражаются при использовании Bootstrap в RTL. Установите `data-bs-placement`, чтобы изменить направление.

<Example addStackblitzJs code={`<button type="button" class="btn btn-secondary" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-content="Top popover">
    Popover on top
  </button>
  <button type="button" class="btn btn-secondary" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right" data-bs-content="Right popover">
    Popover on right
  </button>
  <button type="button" class="btn btn-secondary" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="bottom" data-bs-content="Bottom popover">
    Popover on bottom
  </button>
  <button type="button" class="btn btn-secondary" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="left" data-bs-content="Left popover">
    Popover on left
  </button>`} />

### Пользовательский `container`

Если у вас есть некоторые стили родительского элемента, которые мешают работе поповера, вам нужно указать пользовательский `container`, чтобы HTML поповера отображался внутри этого элемента. Это часто встречается в адаптивных таблицах, группах ввода и т. п.

```js
const popover = new bootstrap.Popover('.example-popover', {
  container: 'body'
})
```

Другая ситуация, когда вам нужно задать явный пользовательский `container`, — это всплывающие окна внутри [модального диалогового окна]([[docsref:/components/modal]]), чтобы убедиться, что само всплывающее окно добавлено к модальному окну. Это особенно важно для всплывающих окон, содержащих интерактивные элементы — модальные диалоговые окна будут захватывать фокус, поэтому, если всплывающее окно не является дочерним элементом модального окна, пользователи не смогут фокусироваться или активировать эти интерактивные элементы.

```js
const popover = new bootstrap.Popover('.example-popover', {
  container: '.modal-body'
})
```

### Пользовательские всплывающие окна

<AddedIn version="5.2.0" />

Вы можете настроить внешний вид всплывающих окон, используя [CSS-переменные](#variables). Мы устанавливаем пользовательский класс с `data-bs-custom-class="custom-popover"`, чтобы ограничить наш пользовательский внешний вид и использовать его для переопределения некоторых локальных переменных CSS.

<ScssDocs name="custom-popovers" file="site/src/scss/_component-examples.scss" />

<Example addStackblitzJs class="custom-popover-demo" code={`<button type="button" class="btn btn-secondary"
          data-bs-toggle="popover" data-bs-placement="right"
          data-bs-custom-class="custom-popover"
          data-bs-title="Custom popover"
          data-bs-content="This popover is themed via CSS variables.">
    Custom popover
  </button>`} />

### Закрыть при следующем клике

Используйте триггер `focus`, чтобы закрыть всплывающие окна при следующем щелчке пользователя по элементу, отличному от переключателя.

<Callout type="danger">
**Для закрытия при следующем щелчке требуется специальный HTML-код для корректной кросс-браузерной и кросс-платформенной работы.** Вы можете использовать только элементы `<a>`, но не `<button>`, и вы должны включить [`tabindex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex).
</Callout>

<Example addStackblitzJs code={`<a tabindex="0" class="btn btn-lg btn-danger" role="button" data-bs-toggle="popover" data-bs-trigger="focus" data-bs-title="Dismissible popover" data-bs-content="And here’s some amazing content. It’s very engaging. Right?">Dismissible popover</a>`} />

```js
const popover = new bootstrap.Popover('.popover-dismiss', {
  trigger: 'focus'
})
```

### Отключенные элементы

Элементы с атрибутом `disabled` не являются интерактивными, то есть пользователи не могут навести на них курсор или щелкнуть их, чтобы вызвать всплывающее окно (или подсказку). В качестве обходного пути вы захотите вызвать всплывающее окно из оболочки `<div>` или `<span>`, в идеале сделать его фокусируемым с помощью клавиатуры с помощью `tabindex="0"`.

Для отключенных триггеров всплывающих окон вы также можете предпочесть `data-bs-trigger="hover focus"`, чтобы всплывающее окно отображалось как немедленная визуальная обратная связь для ваших пользователей, поскольку они могут не ожидать _клика_ по отключенному элементу.

<Example addStackblitzJs code={`<span class="d-inline-block" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Disabled popover">
    <button class="btn btn-primary" type="button" disabled>Disabled button</button>
  </span>`} />

## CSS

### Переменные

<AddedIn version="5.2.0" />

Как часть развивающегося подхода Bootstrap к переменным CSS, всплывающие окна теперь используют локальные переменные CSS в `.popover` для расширенной настройки в реальном времени. Значения переменных CSS задаются через Sass, поэтому настройка Sass по-прежнему поддерживается.

<ScssDocs name="popover-css-vars" file="scss/_popover.scss" />

### Sass переменные

<ScssDocs name="popover-variables" file="scss/_variables.scss" />

## Использование

Включить всплывающие окна через JavaScript:

```js
const exampleEl = document.getElementById('example')
const popover = new bootstrap.Popover(exampleEl, options)
```

<Callout type="warning">
**Сохраняйте доступность всплывающих окон для пользователей клавиатуры и вспомогательных технологий**, добавляя их только к элементам HTML, которые традиционно фокусируются с помощью клавиатуры и являются интерактивными (например, ссылки или элементы управления формами). Хотя другие элементы HTML можно сделать фокусируемыми, добавив `tabindex="0"`, это может создать раздражающие и запутанные табуляции на неинтерактивных элементах для пользователей клавиатуры, и большинство вспомогательных технологий в настоящее время не объявляют всплывающие окна в этой ситуации. Кроме того, не полагайтесь исключительно на `hover` как на триггер для ваших всплывающих окон, так как это сделает их невозможными для пользователей клавиатуры.

Избегайте добавления чрезмерного количества контента в всплывающие окна с параметром `html`. После отображения всплывающих окон их контент привязывается к элементу триггера с атрибутом `aria-describedby`, в результате чего все содержимое всплывающего окна объявляется пользователям вспомогательных технологий как один длинный непрерывный поток.

Всплывающие окна не управляют порядком фокуса клавиатуры, и их размещение в DOM может быть случайным, поэтому будьте осторожны при добавлении интерактивных элементов (например, форм или ссылок), так как это может привести к нелогичному порядку фокуса или сделать само содержимое всплывающего окна полностью недоступным для пользователей клавиатуры. В случаях, когда вам необходимо использовать эти элементы, рассмотрите возможность использования вместо этого модального диалога.
</Callout>

### Опции

<JsDataAttributes />

<Callout type="warning">
Обратите внимание, что по соображениям безопасности параметры `sanitize`, `sanitizeFn` и `allowList` не могут быть предоставлены с использованием атрибутов данных.
</Callout>

<BsTable>
| Имя | Тип | По умолчанию | Описание |
| --- | --- | --- | --- |
| `allowList` | object | [Значение по умолчанию]([[docsref:/getting-started/javascript#sanitizer]]) | Объект, содержащий разрешенные теги и атрибуты. Те, которые явно не разрешены, будут удалены [дезинфектором контента]([[docsref:/getting-started/javascript#sanitizer]]). <Callout type="warning">**Соблюдайте осторожность при добавлении в этот список.** Для получения дополнительной информации см. [шпаргалку OWASP по предотвращению межсайтового скриптинга](https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html).</Callout> |
| `animation` | boolean | `true` | Применить CSS-переход с затуханием к поповеру. |
| `boundary` | string, element | `'clippingParents'` | Граница ограничения переполнения всплывающего окна (применяется только к модификатору Popper preventOverflow). По умолчанию это `'clippingParents'`, и он может принимать ссылку HTMLElement (только через JavaScript). Для получения дополнительной информации см. [detectOverflow docs] Popper (https://popper.js.org/docs/v2/utils/detect-overflow/#boundary). |
| `container` | string, element, false | `false` | Добавляет всплывающее окно к определенному элементу. Пример: `container: 'body'`. Этот параметр особенно полезен, поскольку позволяет расположить всплывающее окно в потоке документа рядом с вызывающим элементом, что предотвратит выплывание всплывающего окна из вызывающего элемента при изменении размера окна. |
| `content` | string, element, function | `''` | Текстовое содержимое всплывающего окна. Если задана функция, она будет вызвана со ссылкой `this`, установленной на элемент, к которому прикреплен поповер. |
| `customClass` | string, function | `''` | Добавьте классы к поповеру, когда он отображается. Обратите внимание, что эти классы будут добавлены в дополнение к любым классам, указанным в шаблоне. Чтобы добавить несколько классов, разделите их пробелами: `'class-1 class-2'`. Вы также можете передать функцию, которая должна возвращать одну строку, содержащую дополнительные имена классов. |
| `delay` | число, объект | `0` | Задержка показа и скрытия информера (мс) — не применяется к ручному типу запуска. Если указано число, задержка применяется как к скрытию, так и к показу. Структура объекта: `delay: { "show": 500, "hide": 100 }`. |
| `fallbackPlacements` | строка, массив | `['top', 'right', 'bottom', 'left']` | Определите резервные размещения, указав список размещений в массиве (в порядке предпочтения). Для получения дополнительной информации см. [документацию по поведению] Popper (https://popper.js.org/docs/v2/modifiers/flip/#fallbackplacements). |
| `html` | логическое значение | `false` | Разрешить HTML во информере. Если true, теги HTML в `title` информера будут отображаться во информере. Если false, свойство `innerText` будет использоваться для вставки контента в DOM. Предпочитать текст при работе с пользовательским вводом для [предотвращения атак XSS](https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html). |
| `offset` | число, строка, функция | `[0, 8]` | Смещение поповера относительно его цели. Вы можете передать строку в атрибутах данных со значениями, разделенными запятыми, например: `data-bs-offset="10,20"`. Когда функция используется для определения смещения, она вызывается с объектом, содержащим размещение поппера, ссылку и прямоугольники поппера в качестве первого аргумента. Узел DOM-элемента триггера передается в качестве второго аргумента. Функция должна возвращать массив с двумя числами: [skidding](https://popper.js.org/docs/v2/modifiers/offset/#skidding-1), [distance](https://popper.js.org/docs/v2/modifiers/offset/#distance-1). Для получения дополнительной информации см. [offset docs](https://popper.js.org/docs/v2/modifiers/offset/#options) Поппера. |
| `placement` | string, function | `'right'` | Как расположить информационный элемент: auto, top, bottom, left, right. Если указано `auto`, информационный элемент будет динамически переориентирован. Когда функция используется для определения размещения, она вызывается с узлом DOM информационного элемента в качестве первого аргумента и узлом DOM элемента-триггера в качестве второго. Контекст `this` устанавливается на экземпляр информационного элемента. |
| `popperConfig` | null, object, function | `null` | Чтобы изменить конфигурацию Popper по умолчанию Bootstrap, см. [Конфигурация Popper](https://popper.js.org/docs/v2/constructors/#options). Когда функция используется для создания конфигурации Popper, она вызывается с объектом, который содержит конфигурацию Popper по умолчанию Bootstrap. Это помогает вам использовать и объединять конфигурацию по умолчанию с вашей собственной. Функция должна возвращать объект конфигурации для Popper. |
| `sanitize` | boolean | `true` | Включить [очистку контента]([[docsref:/getting-started/javascript#sanitizer]]). Если true, будут очищены параметры `template`, `content` и `title`. <Callout type="warning">**Будьте осторожны при отключении очистки контента.** Для получения дополнительной информации см. [Шпаргалку по предотвращению межсайтового скриптинга OWASP](https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html). Уязвимости, вызванные исключительно отключением очистки контента, не рассматриваются в рамках модели безопасности Bootstrap.</Callout> |
| `sanitizeFn` | null, function | `null` | Предоставьте альтернативную функцию [очистки контента]([[docsref:/getting-started/javascript#sanitizer]]). Это может быть полезно, если вы предпочитаете использовать специальную библиотеку для выполнения очистки. |
| `selector` | string, false | `false` | Если указан селектор, объекты информера будут делегированы указанным целям. На практике это используется также для применения информеров к динамически добавляемым элементам DOM (поддержка `jQuery.on`). См. [эту проблему]([[config:repo]]/issues/4215) и [информативный пример](https://codepen.io/Johann-S/pen/djJYPb). **Примечание**: атрибут `title` не должен использоваться в качестве селектора. |
| `template` | string | `'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'` | Базовый HTML для использования при создании информера. `title` информера будет вставлен в `.popover-header`. `Содержимое` поповера будет внедрено в `.popover-body`. `.popover-arrow` станет стрелкой поповера. Самый внешний элемент-обертка должен иметь класс `.popover` и `role="tooltip"`. |
| `title` | string, element, function | `''` | Заголовок поповера. Если задана функция, она будет вызвана со ссылкой `this`, установленной на элемент, к которому прикреплен поповер. |
| `trigger` | string | `'click'` | Как срабатывает поповер: click, hover, focus, manual. Вы можете передать несколько триггеров; разделяйте их пробелом. `'manual'` указывает, что поповер будет срабатывать программно с помощью методов `.popover('show')`, `.popover('hide')` и `.popover('toggle')`; это значение нельзя комбинировать ни с каким другим триггером. `'hover'' сам по себе приведет к появлению всплывающих окон, которые невозможно вызвать с помощью клавиатуры, и должен использоваться только при наличии альтернативных методов передачи той же информации для пользователей клавиатуры.
</BsTable>

<Callout>
#### Атрибуты данных для отдельных поповеров

Варианты для отдельных поповеров можно также указать с помощью атрибутов данных, как описано выше.
</Callout>

#### Использование функции с `popperConfig`

```js
const popover = new bootstrap.Popover(element, {
  popperConfig(defaultBsPopperConfig) {
    // const newPopperConfig = {...}
    // use defaultBsPopperConfig if needed...
    // return newPopperConfig
  }
})
```

### Методы

<Callout name="danger-async-methods" type="danger" />

<BsTable>
| Метод | Описание |
| --- | --- |
| `disable` | Отключает возможность отображения вспомогательного элемента. Поддерживающее меню можно будет отобразить только в том случае, если оно будет повторно включено. |
| `dispose` | Скрывает и уничтожает вспомогательное меню элемента (удаляет сохраненные данные в элементе DOM). Поддерживающие меню, использующие делегирование (созданное с помощью [опции `selector`](#options)), не могут быть индивидуально уничтожены в элементах-триггерах-потомках. |
| `enable` | Предоставляет вспомогательному элементу элемента возможность отображения. **По умолчанию вспомогательные меню включены.** |
| `getInstance` | Метод _Static_, позволяющий получить экземпляр вспомогательного элемента, связанный с элементом DOM. |
| `getOrCreateInstance` | Метод _Static_, позволяющий получить экземпляр вспомогательного элемента, связанный с элементом DOM, или создать новый, если он не был инициализирован. |
| `hide` | Скрывает всплывающее окно элемента. **Возвращает вызывающему до того, как всплывающее окно фактически скрыто** (т. е. до того, как произошло событие `hidden.bs.popover`). Это считается «ручным» запуском всплывающего окна. |
| `setContent` | Дает возможность изменить содержимое всплывающего окна после его инициализации. |
| `show` | Показывает всплывающее окно элемента. **Возвращает вызывающему до того, как всплывающее окно фактически показано** (т. е. до того, как произошло событие `shown.bs.popover`). Это считается «ручным» запуском всплывающего окна. Вспомогательные окна, заголовок и содержимое которых имеют нулевую длину, никогда не отображаются. |
| `toggle` | Переключает всплывающее окно элемента. **Возвращает вызывающему объекту до того, как поповер был фактически показан или скрыт** (т. е. до того, как произошло событие `shown.bs.popover` или `hidden.bs.popover`). Это считается «ручным» запуском поповера. |
| `toggleEnabled` | Переключает возможность показа или скрытия поповера элемента. |
| `update` | Обновляет положение поповера элемента. |
</BsTable>


```js
// getOrCreateInstance example
const popover = bootstrap.Popover.getOrCreateInstance('#example') // Возвращает экземпляр всплывающего окна Bootstrap

// setContent example
popover.setContent({
  '.popover-header': 'another title',
  '.popover-body': 'another content'
})
```

<Callout>
Метод `setContent` принимает аргумент `object`, где каждый ключ свойства является допустимым селектором `string` в шаблоне всплывающего окна, а каждое связанное значение свойства может быть `string` | `element` | `function` | `null`
</Callout>

### События

<BsTable>
| Событие | Описание |
| --- | --- |
| `hide.bs.popover` | Это событие срабатывает немедленно после вызова метода экземпляра `hide`. |
| `hidden.bs.popover` | Это событие срабатывает, когда поповер перестает скрываться от пользователя (будет ждать завершения переходов CSS). |
| `inserted.bs.popover` | Это событие срабатывает после события `show.bs.popover`, когда шаблон поповера добавляется в DOM. |
| `show.bs.popover` | Это событие срабатывает немедленно после вызова метода экземпляра `show`. |
| `shown.bs.popover` | Это событие срабатывает, когда поповер становится видимым для пользователя (будет ждать завершения переходов CSS). |
</BsTable>

```js
const myPopoverTrigger = document.getElementById('myPopover')
myPopoverTrigger.addEventListener('hidden.bs.popover', () => {
  // сделайте что-нибудь...
})
```
