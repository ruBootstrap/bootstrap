<div class="bs-docs-section">
  <h1 id="affix" class="page-header">Фиксация <small>affix.js</small></h1>

  <h2 id="affix-examples">Пример</h2>
  <p>Плагин affix переключает <code>position: fixed;</code>, имитируя эффект <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/position#Sticky_positioning"><code>position: sticky;</code></a>. Правая боковая навигация — это живая демонстрация работы affix.</p>

  <hr class="bs-docs-separator">

  <h2 id="affix-usage">Использование</h2>
  <p>Используйте плагин affix через data-атрибуты или вручную с помощью собственного JavaScript. <strong class="text-danger">В обоих случаях необходимо задать CSS для позиционирования и ширины фиксируемого содержимого.</strong></p>
  <p>Примечание: не используйте affix для элементов внутри относительно позиционированных контейнеров, например, сдвинутых колонок, из-за <a href="https://github.com/twbs/bootstrap/issues/12126">ошибки рендеринга в Safari</a>.</p>

  <h3>Позиционирование через CSS</h3>
  <p>Плагин affix переключает три класса, каждый из которых соответствует определённому состоянию: <code>.affix</code>, <code>.affix-top</code> и <code>.affix-bottom</code>. Стили для этих классов (кроме <code>position: fixed;</code> для <code>.affix</code>) вы должны задать самостоятельно для управления позициями.</p>
  <p>Вот как работает affix:</p>
  <ol>
    <li>Сначала плагин добавляет <code>.affix-top</code>, чтобы обозначить верхнее положение элемента. CSS-позиционирование не требуется.</li>
    <li>При прокрутке мимо элемента, который нужно зафиксировать, происходит фиксация: <code>.affix</code> заменяет <code>.affix-top</code> и устанавливает <code>position: fixed;</code> (это задаётся стилями Bootstrap).</li>
    <li>Если задан нижний отступ, прокрутка мимо него заменяет <code>.affix</code> на <code>.affix-bottom</code>. Так как отступы необязательны, для их работы нужно прописать соответствующий CSS. В этом случае добавьте <code>position: absolute;</code> при необходимости. Плагин использует data-атрибут или опцию JavaScript для определения позиции элемента.</li>
  </ol>
  <p>Следуйте этим шагам для настройки CSS при любом из способов использования ниже.</p>

  <h3>Через data-атрибуты</h3>
  <p>Чтобы легко добавить поведение affix к любому элементу, просто добавьте <code>data-spy="affix"</code> к нужному элементу. Используйте отступы для определения момента фиксации.</p>

{% highlight html %}
<div data-spy="affix" data-offset-top="60" data-offset-bottom="200">
  ...
</div>
{% endhighlight %}

  <h3>Через JavaScript</h3>
  <p>Вызовите плагин affix через JavaScript:</p>
{% highlight js %}
$('#myAffix').affix({
  offset: {
    top: 100,
    bottom: function () {
      return (this.bottom = $('.footer').outerHeight(true))
    }
  }
})
{% endhighlight %}


  <h3 id="affix-options">Опции</h3>
  <p>Опции можно передавать через data-атрибуты или JavaScript. Для data-атрибутов добавьте имя опции к <code>data-</code>, например <code>data-offset-top="200"</code>.</p>

  <div class="table-responsive">
    <table class="table table-bordered table-striped js-options-table">
      <thead>
       <tr>
         <th>Имя</th>
         <th>Тип</th>
         <th>По умолчанию</th>
         <th>Описание</th>
       </tr>
      </thead>
      <tbody>
       <tr>
         <td>offset</td>
         <td>number | function | object</td>
         <td>10</td>
         <td>Пиксели смещения от экрана при вычислении позиции прокрутки. Если указано одно число, смещение применяется и сверху, и снизу. Для разных отступов используйте объект <code>offset: { top: 10 }</code> или <code>offset: { top: 10, bottom: 5 }</code>. Для динамического расчёта используйте функцию.</td>
       </tr>
       <tr>
         <td>target</td>
         <td>selector | node | jQuery element</td>
         <td>объект <code>window</code></td>
         <td>Указывает целевой элемент для фиксации.</td>
       </tr>

      </tbody>
    </table>
  </div><!-- /.table-responsive -->

  <h3 id="affix-methods">Методы</h3>

  <h4><code>.affix(options)</code></h4>
  <p>Активирует ваш элемент как фиксируемый. Принимает необязательный объект опций <code>object</code>.</p>
{% highlight js %}
$('#myAffix').affix({
  offset: 15
})
{% endhighlight %}

  <h4><code>.affix('checkPosition')</code></h4>
  <p>Пересчитывает состояние affix на основе размеров, позиции и прокрутки соответствующих элементов. Классы <code>.affix</code>, <code>.affix-top</code> и <code>.affix-bottom</code> добавляются или удаляются в зависимости от нового состояния. Этот метод нужно вызывать при изменении размеров фиксируемого содержимого или целевого элемента для корректного позиционирования.</p>
  {% highlight js %}$('#myAffix').affix('checkPosition'){% endhighlight %}

  <h3 id="affix-events">События</h3>
  <p>Плагин affix в Bootstrap предоставляет несколько событий для подключения к функционалу фиксации.</p>
  <div class="table-responsive">
    <table class="table table-bordered table-striped bs-events-table">
      <thead>
        <tr>
          <th>Тип события</th>
          <th>Описание</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>affix.bs.affix</td>
          <td>Это событие срабатывает непосредственно перед тем, как элемент будет зафиксирован.</td>
        </tr>
        <tr>
          <td>affixed.bs.affix</td>
          <td>Это событие срабатывает после того, как элемент был зафиксирован.</td>
        </tr>
        <tr>
          <td>affix-top.bs.affix</td>
          <td>Это событие срабатывает непосредственно перед тем, как элемент будет зафиксирован сверху.</td>
        </tr>
        <tr>
          <td>affixed-top.bs.affix</td>
          <td>Это событие срабатывает после того, как элемент был зафиксирован сверху.</td>
        </tr>
       <tr>
        <td>affix-bottom.bs.affix</td>
          <td>Это событие срабатывает непосредственно перед тем, как элемент будет зафиксирован снизу.</td>
        </tr>
        <tr>
          <td>affixed-bottom.bs.affix</td>
          <td>Это событие срабатывает после того, как элемент был зафиксирован снизу.</td>
        </tr>
      </tbody>
    </table>
  </div><!-- /.table-responsive -->
</div>
